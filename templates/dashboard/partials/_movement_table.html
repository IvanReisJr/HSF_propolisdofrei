<style> 
  #modal-movimentacoes thead th { 
    position: sticky; 
    top: 0; 
    background-color: #f9fafb; /* Cor de fundo do cabeçalho */ 
    z-index: 20; 
    box-shadow: inset 0 -1px 0 #e5e7eb; /* Linha de separação */ 
  } 
</style>
<div id="modal-table-content">
    <table class="w-full">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hora</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Produto</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Qtd.</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Operação</th>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usuário</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
            {% for movement in latest_stock_movements %}
            <tr class="animate-enter">
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-500">{{ movement.created_at|date:"H:i" }}</td>
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-700">{{ movement.product.name }}</td>
                <td class="px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900">{{ movement.quantity }}</td>
                <td class="px-4 py-2 whitespace-nowrap">
                    {% if movement.movement_type == 'entry' or movement.movement_type == 'adjustment_plus' or movement.movement_type == 'reversal_out' or movement.movement_type == 'transfer_in' %}
                        <span class="inline-flex items-center gap-1.5 text-green-700">
                            <i data-lucide="arrow-up-circle" class="w-4 h-4"></i>
                            <span class="text-xs font-medium">{{ movement.get_movement_type_display }}</span>
                            {% if movement.movement_type == 'transfer_in' %}
                            <span class="px-1.5 py-0.5 rounded-full bg-blue-100 text-blue-800 text-[10px] font-bold border border-blue-200 ml-1" title="Gerado automaticamente pela Matriz">
                                AUTOMÁTICO
                            </span>
                            {% endif %}
                        </span>
                    {% else %}
                        <span class="inline-flex items-center gap-1.5 text-red-700">
                            <i data-lucide="arrow-down-circle" class="w-4 h-4"></i>
                            <span class="text-xs font-medium">{{ movement.get_movement_type_display }}</span>
                            {% if movement.movement_type == 'transfer_out' %}
                            <span class="px-1.5 py-0.5 rounded-full bg-blue-100 text-blue-800 text-[10px] font-bold border border-blue-200 ml-1" title="Gerado automaticamente">
                                AUTOMÁTICO
                            </span>
                            {% endif %}
                        </span>
                    {% endif %}
                </td>
                <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-500">{{ movement.user.get_full_name|default:movement.user.username }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="px-4 py-2 text-center text-sm text-gray-500">Nenhuma movimentação nas últimas 24h.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script>
    // Garante que os ícones sejam renderizados após o swap do HTMX
    lucide.createIcons();
</script>
