{% extends "base.html" %}

{% block title %}Pagamentos Pendentes - Própolis do Frei{% endblock %}

{% block breadcrumbs %}
<span style="color: #a3a3a3;">Início / Financeiro / </span> <span style="font-weight: 600;">Pendências</span>
{% endblock %}

{% block content %}
<div class="flex-col gap-6">
    <div class="flex justify-between items-center">
        <div>
            <h1 style="font-size: 1.875rem; font-weight: 700;">Pagamentos Pendentes</h1>
            <p style="color: #666;">Selecione um pedido para enviar o comprovante de pagamento.</p>
        </div>
        <a href="{% url 'settlement_list' %}" class="btn btn-outline">
            <i data-lucide="list"></i> Ver Histórico
        </a>
    </div>

    <div class="card" style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom: 1px solid var(--border); text-align: left;">
                    <th style="padding: 1rem; font-size: 0.875rem; color: #666;">Pedido</th>
                    <th style="padding: 1rem; font-size: 0.875rem; color: #666;">Data</th>
                    <th style="padding: 1rem; font-size: 0.875rem; color: #666;">Valor Total</th>
                    <th style="padding: 1rem; font-size: 0.875rem; color: #666;">Condição</th>
                    <th style="padding: 1rem; font-size: 0.875rem; color: #666;">Status Pgto</th>
                    <th style="padding: 1rem; font-size: 0.875rem; color: #666; text-align: right;">Ação</th>
                </tr>
            </thead>
            <tbody>
                {% for order in orders %}
                <tr style="border-bottom: 1px solid var(--sidebar-accent);">
                    <td style="padding: 1rem; font-weight: 600; font-family: monospace;">#{{ order.order_number }}</td>
                    <td style="padding: 1rem; font-size: 0.875rem;">{{ order.created_at|date:"d/m/Y" }}</td>
                    <td style="padding: 1rem; font-weight: 600;">R$ {{ order.total_amount }}</td>
                    <td style="padding: 1rem;">{{ order.get_payment_condition_display }}</td>
                    <td style="padding: 1rem;">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                            {{ order.get_payment_status_display }}
                        </span>
                    </td>
                    <td style="padding: 1rem; text-align: right;">
                        <a href="{% url 'upload_settlement' order.id %}" class="btn btn-primary btn-sm flex items-center gap-2 justify-end" style="width: fit-content; margin-left: auto;">
                            <i data-lucide="dollar-sign" style="width: 16px;"></i> Prestar Contas
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="padding: 3rem; text-align: center; color: #a3a3a3;">
                        <i data-lucide="check-circle" style="width: 48px; height: 48px; display: block; margin: 0 auto 1rem; opacity: 0.3;"></i>
                        Nenhum pagamento pendente!
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
