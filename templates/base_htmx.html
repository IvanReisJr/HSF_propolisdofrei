<title hx-swap-oob="true">{% block title %}Própolis do Frei - Sistema de Gestão{% endblock %}</title>

<div id="top-bar" class="top-bar" hx-swap-oob="true">
    <div class="breadcrumbs">
        {% block breadcrumbs %}
        <span style="color: #a3a3a3;">Início</span>
        {% endblock %}
    </div>
    <div class="user-menu" style="display: flex; align-items: center; gap: 0.5rem;">
        <i data-lucide="user" style="width: 16px; color: var(--primary);"></i>
        <span style="font-weight: 600; color: #4B3621;">{{ user.email }}</span>
    </div>
</div>

{% if messages %}
<div style="margin-bottom: 1.5rem;">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}"
        style="padding: 1rem; border-radius: 2px; margin-bottom: 0.5rem; background: {% if message.tags == 'success' %}#D1FAE5{% elif message.tags == 'error' %}#FEE2E2{% else %}#FEF3C7{% endif %}; color: {% if message.tags == 'success' %}#065F46{% elif message.tags == 'error' %}#991B1B{% else %}#92400E{% endif %}; border-left: 3px solid {% if message.tags == 'success' %}#059669{% elif message.tags == 'error' %}#DC2626{% else %}#D4AF37{% endif %};">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

{% block content %}{% endblock %}

<script>
    lucide.createIcons();
    // Update active classes on sidebar
    document.querySelectorAll('.nav-link, .nav-sublink').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === window.location.pathname ||
            (link.getAttribute('href') !== '/' && window.location.pathname.startsWith(link.getAttribute('href')))) {
            link.classList.add('active');
        }
    });
</script>