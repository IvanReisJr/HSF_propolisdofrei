{% extends "base.html" %}

{% block title %}Dashboard Consolidado - Própolis do Frei{% endblock %}

{% block breadcrumbs %}
<a href="{% url 'dashboard' %}" class="hover:text-primary transition-colors" style="color: #a3a3a3; text-decoration: none;">Início</a> 
<span style="color: #a3a3a3;"> / </span> 
<span style="font-weight: 600;">Dashboard Consolidado</span>
{% endblock %}

{% block content %}
<div class="flex-col gap-6 animate-enter">
    
    <!-- Header Card -->
    <div class="card p-6 relative overflow-hidden"
        style="background: linear-gradient(135deg, #FFF8E1 0%, #F3E5AB 100%); color: #4B3621; border: 1px solid #D4AF37;">
        <div class="flex justify-between items-center relative z-10">
            <div>
                <h1 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Visão Consolidada de Estoque</h1>
                <p style="font-size: 0.875rem; opacity: 0.9;">Monitoramento unificado entre CD Humanitas e Sede Administrativa.</p>
            </div>
            <div style="background: rgba(255,255,255,0.5); padding: 0.5rem; border-radius: 8px;">
                <i data-lucide="bar-chart-2" style="width: 32px; height: 32px; color: #92400E;"></i>
            </div>
        </div>
    </div>

    <!-- Table Card -->
    <div class="card" style="overflow: hidden;">
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #FAFAFA; border-bottom: 2px solid #E5E5E5;">
                        <th style="padding: 1rem; text-align: left; font-size: 0.875rem; color: #666; font-weight: 600;">Produto</th>
                        <th style="padding: 1rem; text-align: left; font-size: 0.875rem; color: #666; font-weight: 600;">Lote</th>
                        <th style="padding: 1rem; text-align: center; font-size: 0.875rem; color: #666; font-weight: 600;">CD Humanitas (Saldo)</th>
                        <th style="padding: 1rem; text-align: center; font-size: 0.875rem; color: #666; font-weight: 600;">CD Sede Adm (Saldo)</th>
                        <th style="padding: 1rem; text-align: right; font-size: 0.875rem; color: #4B3621; font-weight: 700;">Total Global</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in report_data %}
                    <tr style="border-bottom: 1px solid #F3F4F6; transition: background 0.2s;" class="hover:bg-gray-50">
                        <td style="padding: 1rem; color: #1F2937; font-weight: 500;">
                            <div class="flex items-center gap-2">
                                <div style="width: 32px; height: 32px; background: #FFFBEB; border-radius: 4px; display: flex; align-items: center; justify-content: center; border: 1px solid #FDE68A;">
                                    <i data-lucide="package" style="width: 16px; height: 16px; color: #D97706;"></i>
                                </div>
                                <div>
                                    <div>{{ item.product.name }}</div>
                                    <div style="font-size: 0.75rem; color: #9CA3AF;">{{ item.product.code }}</div>
                                </div>
                            </div>
                        </td>
                        <td style="padding: 1rem; color: #4B5563;">
                            {% if item.batch %}
                            <span style="background: #F3F4F6; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; border: 1px solid #E5E7EB;">
                                {{ item.batch }}
                            </span>
                            {% else %}
                            <span style="color: #9CA3AF; font-size: 0.875rem;">-</span>
                            {% endif %}
                        </td>
                        <td style="padding: 1rem; text-align: center; font-weight: 500; color: #4B5563;">
                            {{ item.humanitas }}
                        </td>
                        <td style="padding: 1rem; text-align: center; font-weight: 500; color: #4B5563;">
                            {{ item.sede_adm }}
                        </td>
                        <td style="padding: 1rem; text-align: right; font-weight: 700; color: #059669;">
                            {{ item.total }}
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" style="padding: 4rem; text-align: center; color: #9CA3AF;">
                            <i data-lucide="inbox" style="width: 48px; height: 48px; display: block; margin: 0 auto 1rem; opacity: 0.3;"></i>
                            <p>Nenhum dado de estoque encontrado.</p>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
